<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punching Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>The Simulation, "Ready. FIGHT!"</h1>

    <section class="flipcoin">
        <h3>Click the button to toss a coin.</h3>
        <div class="dropdown"> <!--Dropdown Option for Heads and Tails for the Player-->
            <button onclick ="myFunction()" class="dropbtn" id="tc">Coin Toss</button>
            <div id="myDropdown" class="dropdown-content">
                <a onclick="heads()" id="hb" href="#">Heads</a>
                <a onclick="tails()" id="tb" href="#">Tails</a>
            </div>
            <p id="result"></p>
            <br>
            <p>Events:</p>
            <section class="events"> <!--<p id> is used to specifically target and access specific Elements in Javascript-->
                <p id="playchoice"></p>
                <p id="event1"></p>
                <p id="event2"></p>
                <p id="event3"></p>
            </section>
        </div>
    </section>

    <section class="fight">
        <section id="hpbar">
            <p id="HPlayer"></p> 
            <p id="HPponent"></p>
        </section>
        <section id="foe" class="main"> <!-- Skibidi Toilet in Full Health -->
            <img id="image1" src=" ">
        </section>
        <section id="you" class="main"> <!---Cameraman in Full Health -->
            <img id="image2" src=" ">
        </section>
        <img id="bg" src=" ">
    </section>

    <section class="opts"> <!-- Buttons for the option to Attack, Defend, and Reset -->
        <button onclick="playerAttack()" id="atb" class="atkOrDef">Attack</button>
        <button onclick="playerDefend()" id="dfb" class="atkOrDef">Defend</button>
        <button onclick="resetBtn()" id="rtb">Reset.</button>
    </section>

    <section class="themes">
        <p>Themes (Click one before you start!): </p>
        <button onclick="skibidiTheme()">Skibidi Theme</button>
        <button onclick="valoTheme()">Valorant Theme</button>
    </section>

    <script>
        // The Set Health of the Player and Skibidi Toilet's Health which is 100
        var playerHP = 100; 
        var opponentHP = 100;
        var theme, choice, playerdmg, oppdmg, action, placeholder;

        const atkbut = document.getElementById("atb");
        const defbut = document.getElementById("dfb");
        const resbut = document.getElementById("rtb");
        const tossbut = document.getElementById("tc");

        // Indicates the Player and Opponents Health
        document.getElementById("HPlayer").innerHTML = "Player: " + playerHP;
        document.getElementById("HPponent").innerHTML = "Opponent: " + opponentHP;

        resbut.disabled = true;
        atkbut.disabled = true;
        defbut.disabled = true;


        // Function for Heads
        function heads(){
            choice = 'head';
            tossCoin('head');
        }


        // Function for Tails
        function tails(){
            choice = 'tail';
            tossCoin('tail');
        }

        // Function TossCoin, as indicated by sir's instructions, the player has the option to choose 
        // either 'Heads' or 'Tails'. The program will generate a random result that will produce again
        // Either 'Heads' or 'Tails', if the player matches with the program, the player can have the
        // The player has the advantage to attack first however the defend button is disabled
        // If the player does not match with the program, they will not gain the first move and will have the option to attack or defend

        function tossCoin(choice){
            var rand = Math.round(Math.random());
            var coin, result;
            atkbut.disabled = false;
            if(rand == 0){
                coin = 'head';
                if(choice == coin){
                    document.getElementById("result").innerHTML = "Coin is head. You chose head!";
                }
                else{
                    document.getElementById("result").innerHTML = "Coin is head. You chose tail!";
                    defbut.disabled = false;
                }
            }
            else{
                coin = 'tail';
                if(choice == coin){
                    document.getElementById("result").innerHTML = "Coin is tail. You chose tail!";
                }
                else{
                    document.getElementById("result").innerHTML = "Coin is tail. You chose head!";
                    defbut.disabled = false;
                }
            }
            tossbut.disabled = true;
            resbut.disabled = false;
        }

        function calculateDamage(){
            var damage = Math.round(Math.random()*4)+1;
            return damage;
        } // Randomized Calculation for the damage, it ranges from 1 - 5.

        function opponentAction(){
            action = Math.round(Math.random());
            return action;
        } // Declaring and Randomizing the Function for the action of the opponent

        function playerAttack(){
            defbut.disabled = false;
            document.getElementById("playchoice").innerHTML = "<b>You will attack!</b>\n";
            playerdmg = calculateDamage();
            if(opponentAction() == 1){
                oppdmg = calculateDamage();
                playerHP = playerHP - oppdmg;
                opponentHP = opponentHP - playerdmg;
                document.getElementById("event1").innerHTML = "You inflict " + playerdmg + " damage";
                document.getElementById("event2").innerHTML = "Opponent inflicts " + oppdmg + " damage";
                document.getElementById("event3").innerHTML = " ";
            } // If the Player chose to attack and the opponent randomly attacks as well.

            else{
                if(playerdmg - 3 <= 0){
                    document.getElementById("event1").innerHTML = "You attempted to inflict " + playerdmg + " damage";
                    document.getElementById("event2").innerHTML = "The opponent completely blocked the attack";
                    document.getElementById("event3").innerHTML = " ";
                } // If the Player chose to attack and the opponent decided to completely blocked the attack.

                else{
                    placeholder = playerdmg - 3;
                    opponentHP = opponentHP - placeholder;
                    document.getElementById("event1").innerHTML = "You attempted to inflict " + playerdmg + " damage";
                    document.getElementById("event2").innerHTML = "Opponent defended from the attack";
                    document.getElementById("event3").innerHTML = "You inflicted " + placeholder + " damage";
                } // If the Player chose to attack and the opponent defended from the attack
            }
            healthStatus()
            checkHealth();
            if(theme == 1){
                cameraHP(playerHP);
                toiletHP(opponentHP);
            }
            else{
                deadlockHP(playerHP);
                wingmanHP(opponentHP);
            }
        }

        function playerDefend(){
            document.getElementById("playchoice").innerHTML = "<b>You will defend!</b>\n";
            if(opponentAction() == 1){
                oppdmg = calculateDamage();
                if(oppdmg - 3 <= 0){
                    document.getElementById("event1").innerHTML = "Opponent attempted to inflict " + oppdmg + " damage";
                    document.getElementById("event2").innerHTML = "You completely blocked the attack";
                    document.getElementById("event3").innerHTML = " ";
                } // If the Player chose to defend and the opponent decided to inflict
                else{
                    placeholder = oppdmg - 3;
                    playerHP = playerHP - placeholder;
                    document.getElementById("event1").innerHTML = "Opponent attempted to inflict " + oppdmg + " damage";
                    document.getElementById("event2").innerHTML = "You defended from the attack";
                    document.getElementById("event3").innerHTML = "Opponent inflicts " + placeholder + " damage";
                } // If the Player chose to defend and the opponent attempted to inflict the attack
    
            }
            else{
                document.getElementById("event1").innerHTML = "Both chose to defend";
                document.getElementById("event2").innerHTML = " ";
                document.getElementById("event3").innerHTML = " ";
            }  // If both the Player and Opponent chose to defend
            healthStatus()
            checkHealth();
        }

        function healthStatus(){
            document.getElementById("HPlayer").innerHTML = "Player: " + playerHP;
            document.getElementById("HPponent").innerHTML = "Opponent: " + opponentHP;
        }

        function checkHealth(){
            if(opponentHP <= 0){
                opponentHP = 0;
                document.getElementById("HPponent").innerHTML = "Opponent: " + opponentHP;
                document.getElementById("event1").innerHTML = "<b>Player wins!</b>";
                document.getElementById("event2").innerHTML = " ";
                document.getElementById("event3").innerHTML = " ";
                atkbut.disabled = true;
                defbut.disabled = true;
            } // Player wins if the Opponent's HP is equal and reaches first to zero.
            if(playerHP <= 0){
                playerHP = 0;
                document.getElementById("HPlayer").innerHTML = "Player: " + playerHP;
                document.getElementById("event1").innerHTML = "<b>Opponent wins!</b>";
                document.getElementById("event2").innerHTML = " ";
                document.getElementById("event3").innerHTML = " ";
                atkbut.disabled = true;
                defbut.disabled = true;
            } // Opponent wins if the Player's HP is equal and reaches first to Zero
        }

        function resetBtn(){
            opponentHP = 100;
            playerHP = 100;

            document.getElementById("HPlayer").innerHTML = "Player: " + playerHP;
            document.getElementById("HPponent").innerHTML = "Opponent: " + opponentHP;

            document.getElementById("result").innerHTML = " ";
            document.getElementById("playchoice").innerHTML = " ";
            document.getElementById("event1").innerHTML = " ";
            document.getElementById("event2").innerHTML = " ";
            document.getElementById("event3").innerHTML = " ";

            tossbut.disabled = false;
            atkbut.disabled = true;
            defbut.disabled = true;
            resbut.disabled = true;
            
            image1.src=" ";
            image2.src=" ";
            bg.src=" ";
            
        } // Resets the entire game.

        function myFunction(){
            document.getElementById("myDropdown").classList.toggle("show");
        } // Dropdown Function of the Coin Toss

        window.onclick = function(event){
            if(!event.target.matches('.dropbtn')){
                var dropdowns = document.getElementsByClassName("dropdown-content");
                var i;
                for(i = 0; i < dropdowns.length; i++){
                    var openDropdown = dropdowns[i];
                    if(openDropdown.classList.contains('show')){
                    openDropdown.classList.remove('show');
                    }
                }
            }
        }

        function toiletHP(opponentHP){
            var image = document.getElementById("image1");
            if (opponentHP > 80){
                image = image1.src="toiletFull.png";
            } // If Toilet is Above 80
            else if ((opponentHP <= 80)&&(opponentHP > 60)){
                image = image1.src="toiletEighty.png";
            } // If Toilet is 80 and Greater than 60
            else if ((opponentHP <= 60)&&(opponentHP > 40)){
                image = image1.src="toiletSixty.png";
            } // If Toilet is 60 and Greater than 40
            else if ((opponentHP <= 40)&&(opponentHP > 20)){
                image =image1.src="toiletForty.png";
            } // If Toilet is 40 and Greater than 20
            else if ((opponentHP <= 20)&&(opponentHP > 0)){
                image = image1.src="toiletTwenty.png";
            } // If Toilet is 20 and Greater than 0
            else {
                image = image1.src="toiletdead.png";
            } // If Toilet has no health
        }

        function cameraHP(playerHP){
            var image2 = document.getElementById("image2");
            if (playerHP > 80){
                image2 = image2.src="cameraFull.png";
            } // If Camera is Above 80
            else if ((playerHP <= 80)&&(playerHP > 60)){
                image2 = image2.src="cameraEighty.png";
            } // If Camera is 80 and Greater than 60
            else if ((playerHP <= 60)&&(playerHP > 40)){
                image2 = image2.src="cameraSixty.png";
            } // If Camera is 60 and Greater than 40
            else if ((playerHP <= 40)&&(playerHP > 20)){
                image2 =image2.src="cameraForty.png";
            } // If Camera is 40 and Greater than 20
            else if ((playerHP <= 20)&&(playerHP > 0)){
                image2 = image2.src="cameraTwenty.png";
            } // If Camera is 20 and Greater than 0
            else {
                image2 = image2.src="cameradead.png";
            } // If Camera has no health
        }

        function wingmanHP(opponentHP){
            var image = document.getElementById("image1");
            if (opponentHP > 80){
                image = image1.src="wingmanFull.png";
            }
            else if ((opponentHP <= 80)&&(opponentHP > 60)){
                image = image1.src="wingmanEighty.png";
            }
            else if ((opponentHP <= 60)&&(opponentHP > 40)){
                image = image1.src="wingmanSixty.png";
            }
            else if ((opponentHP <= 40)&&(opponentHP > 20)){
                image =image1.src="wingmanForty.png";
            }
            else if ((opponentHP <= 20)&&(opponentHP > 0)){
                image = image1.src="wingmanTwenty.png";
            }
            else {
                image = image1.src="wingmandead.png";
            }
        }

        function deadlockHP(playerHP){
            var image2 = document.getElementById("image2");
            if (playerHP > 80){
                image = image2.src="didluckFull.png";
            }
            else if ((playerHP <= 80)&&(playerHP > 60)){
                image = image2.src="didluckEighty.png";
            }
            else if ((playerHP <= 60)&&(playerHP > 40)){
                image = image2.src="didluckSixty.png";
            }
            else if ((playerHP <= 40)&&(playerHP > 20)){
                image =image2.src="didluckForty.png";
            }
            else if ((playerHP <= 20)&&(playerHP > 0)){
                image = image2.src="didluckTwenty.png";
            }
            else{
                image = image2.src="didluckdead.png";
            }
        }

        function skibidiTheme(){
            theme = 1;
            image1.src="toiletFull.png";
            image2.src="cameraFull.png";
            bg.src="sewer.png"
        }
        function valoTheme(){
            theme = 2;
            image1.src="wingmanFull.png";
            image2.src="didluckFull.png";
            bg.src="pearl.jpg";
        }
    </script>
</body>
</html>
